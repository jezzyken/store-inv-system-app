"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[408],{3499:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});var i=s(1965),a=s(7678),r=s(4112),n=s(3740),o=s(3698),l=s(2938),c=s(3180),d=s(2050),h=s(8743),u=s(5803),m=(0,u.A)(d.Ql,h.A).extend({name:"v-chip-group",provide(){return{chipGroup:this}},props:{column:Boolean},computed:{classes(){return{...d.Ql.options.computed.classes.call(this),"v-chip-group":!0,"v-chip-group--column":this.column}}},watch:{column(t){t&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData(){return this.setTextColor(this.color,{...d.Ql.options.methods.genData.call(this)})}}}),p=s(4414),g=s(6814),y=s(9991),v=s(9483),b=s(174),f=s(7391),C=s(428),_=s(1920),A=(0,u.A)(f.A,C.A).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter(){this.runDelay("open")},onMouseLeave(){this.runDelay("close")}},render(){if(!this.$scopedSlots.default&&void 0===this.value)return(0,_.OP)("v-hover is missing a default scopedSlot or bound value",this),null;let t;return this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):((0,_.OP)("v-hover should only contain a single element",this),t)}}),x=s(6930),S=s(5420),w=s(7296),k=s(301),D=s(1554),I=s(2756),P=s(7150),T=s(1034),$=s(3307),E=s(812),N=s(4625),B=s(8943),F=s(7112),L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e(I.A,{staticClass:"fill-height",attrs:{"no-gutters":""}},[e(p.A,{attrs:{cols:"7"}},[e(o.A,{staticClass:"ma-2 fill-height d-flex flex-column"},[e(l.ri,{staticClass:"py-2"},[e(F.A,{attrs:{label:"Search products...","prepend-inner-icon":"mdi-magnify",clearable:"",dense:"",outlined:"","hide-details":""},on:{"click:clear":t.clearSearch},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),e(m,{staticClass:"px-4",attrs:{"active-class":"primary--text",mandatory:""},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categories,(function(s){return e(c.A,{key:s,attrs:{filter:"",outlined:""}},[t._v(" "+t._s(s)+" ")])})),1),e(l.OQ,{staticClass:"flex-grow-1 overflow-y-auto",staticStyle:{"max-height":"calc(75vh - 10px)"}},[e(I.A,t._l(t.filteredProducts,(function(s){return e(p.A,{key:s.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(A,{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(o.A,{staticClass:"product-card",class:{"on-hover":i},attrs:{disabled:!s.inStock,elevation:i?8:2},on:{click:function(e){return t.addToCart(s)}}},[e(S.A,{staticClass:"mx-auto",class:{greyscale:!s.inStock},attrs:{src:s.image,contain:"",height:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[e(I.A,{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e(D.A,{attrs:{indeterminate:"",color:"grey lighten-2"}})],1)]},proxy:!0}],null,!0)}),e(l.OQ,{staticClass:"pb-0"},[e("div",{staticClass:"text-subtitle-1 font-weight-medium text-truncate"},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"d-flex justify-space-between align-center"},[e("span",{staticClass:"text-h6 primary--text"},[t._v("₱"+t._s(s.price.toFixed(2)))]),e("span",{staticClass:"caption grey--text"},[t._v("Stock: "+t._s(s.inStock))])])]),s.inStock?t._e():e(c.A,{staticClass:"ma-2",attrs:{color:"red","text-color":"white",small:""}},[t._v(" Out of Stock ")])],1)]}}],null,!0)})],1)})),1)],1)],1)],1),e(p.A,{attrs:{cols:"5"}},[e(o.A,{staticClass:"ma-2 fill-height d-flex flex-column"},[e(l.ri,{staticClass:"py-2"},[e(a.A,{attrs:{items:t.debtors,"item-text":"name","item-value":"_id",label:"Search Debtor",dense:"",outlined:"","hide-details":"",clearable:"",loading:t.debtorSearchLoading,filter:t.customFilter,"return-object":""},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e(x.A,{attrs:{small:""}},[t._v("mdi-account-search")])]},proxy:!0},{key:"item",fn:function({item:s}){return[e(k.pr,[e(k.UZ,[t._v(t._s(s.name))]),e(k.w,{staticClass:"d-flex align-center justify-space-between"},[e("span",{staticClass:"caption"},[t._v(" Available Credit: ₱"+t._s(s.availableCredit)+" ")]),e(n.A,{attrs:{small:"",color:"primary",disabled:s.availableCredit>=s.creditLimit},on:{click:function(e){return e.stopPropagation(),t.openPayDebtDialog(s)}}},[t._v(" Pay ")])],1)],1)]}},{key:"no-data",fn:function(){return[e(w.A,[e(k.pr,[e(k.UZ,[t._v("No debtors found")])],1)],1)]},proxy:!0}]),model:{value:t.selectedDebtor,callback:function(e){t.selectedDebtor=e},expression:"selectedDebtor"}})],1),t.selectedDebtor?e(l.OQ,{staticClass:"py-2 grey lighten-4"},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("div",[e("div",{staticClass:"subtitle-1 font-weight-medium"},[t._v(" "+t._s(t.selectedDebtor.name)+" ")]),e("div",{staticClass:"caption"},[t._v(" Available Credit: ₱"+t._s(t.selectedDebtor.availableCredit)+" ")])]),e("div",[e(n.A,{attrs:{text:"",small:"",color:"red"},on:{click:function(e){t.selectedDebtor=null}}},[t._v(" Clear ")])],1)])]):t._e(),e(l.ri,{staticClass:"py-2 d-flex justify-space-between"},[e("span",[t._v("Orders")]),t.cart.length?e(n.A,{attrs:{text:"",small:"",color:"red"},on:{click:t.clearCart}},[t._v(" Clear Cart ")]):t._e()],1),t.cart.length>0?e("div",{staticClass:"flex-grow-1 overflow-y-auto px-2"},[e(g.A,{staticClass:"elevation-1",attrs:{headers:t.cartHeaders,items:t.cart,"hide-default-footer":"",dense:""},scopedSlots:t._u([{key:"item",fn:function({item:s}){return[e("tr",[e("td",[e("div",{staticClass:"d-flex align-center"},[e(r.A,{staticClass:"mr-2",attrs:{size:"32"}},[e(S.A,{attrs:{src:s.image}})],1),e("div",{staticClass:"text-truncate"},[t._v(t._s(s.name))])],1)]),e("td",[e("div",{staticClass:"d-flex align-center justify-center"},[e(n.A,{attrs:{icon:"","x-small":"",disabled:s.quantity<=1},on:{click:function(e){return t.decrementQuantity(s)}}},[e(x.A,{attrs:{small:""}},[t._v("mdi-minus")])],1),e(F.A,{staticClass:"quantity-input mx-1",style:{width:"50px",minWidth:"50px"},attrs:{type:"number",dense:"","hide-details":"",min:"1",max:s.availableStocks},on:{input:function(e){return t.validateQuantity(s)}},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"item.quantity"}}),e(n.A,{attrs:{icon:"","x-small":"",disabled:s.quantity>=s.availableStocks},on:{click:function(e){return t.incrementQuantity(s)}}},[e(x.A,{attrs:{small:""}},[t._v("mdi-plus")])],1)],1)]),e("td",{staticClass:"text-right"},[t._v("₱"+t._s(s.price))]),e("td",{staticClass:"text-right"},[t._v(" ₱"+t._s((s.price*s.quantity).toFixed(2))+" ")]),e("td",[e(n.A,{attrs:{icon:"",small:"",color:"red"},on:{click:function(e){return t.removeFromCart(s)}}},[e(x.A,{attrs:{small:""}},[t._v("mdi-delete")])],1)],1)])]}}],null,!1,397377866)})],1):e(l.OQ,{staticClass:"cart-empty"},[e(x.A,{attrs:{size:"64",color:"grey lighten-1"}},[t._v("mdi-cart-outline")]),e("p",{staticClass:"mt-2 grey--text text-center"},[t._v(" Your cart is empty"),e("br"),t._v(" Add items to get started ")])],1),t.cart.length>0?e(l.OQ,{staticClass:"pt-0"},[e(v.A,{staticClass:"my-2"}),e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("span",{staticClass:"text-subtitle-1"},[t._v("Subtotal:")]),e("span",{staticClass:"text-subtitle-1"},[t._v("₱"+t._s(t.subTotal.toFixed(2)))])]),e("div",{staticClass:"d-flex justify-space-between"},[e("span",{staticClass:"text-h6"},[t._v("Total:")]),e("span",{staticClass:"text-h6 primary--text"},[t._v("₱"+t._s(t.total))])])],1):t._e(),e(l.SL,{staticClass:"pa-4 pt-0"},[e(n.A,{attrs:{dark:"",color:"primary",block:"","x-large":"",disabled:0===t.cart.length},on:{click:t.openPaymentDialog}},[e(x.A,{attrs:{left:""}},[t._v("mdi-cash-register")]),t._v(" Proceed to Payment ")],1)],1)],1)],1)],1),e(y.A,{attrs:{"max-width":"400"},model:{value:t.newCustomerDialog,callback:function(e){t.newCustomerDialog=e},expression:"newCustomerDialog"}},[e(o.A,[e(l.ri,{staticClass:"primary white--text"},[t._v(" Add New Customer ")]),e(l.OQ,{staticClass:"pt-4"},[e(b.A,{ref:"customerForm",model:{value:t.isCustomerFormValid,callback:function(e){t.isCustomerFormValid=e},expression:"isCustomerFormValid"}},[e(F.A,{attrs:{label:"Customer Name",outlined:"",dense:"",rules:[t=>!!t||"Name is required"]},model:{value:t.newCustomer.name,callback:function(e){t.$set(t.newCustomer,"name",e)},expression:"newCustomer.name"}}),e(F.A,{attrs:{label:"Contact Number",outlined:"",dense:"",rules:[t=>!!t||"Contact number is required"]},model:{value:t.newCustomer.contact,callback:function(e){t.$set(t.newCustomer,"contact",e)},expression:"newCustomer.contact"}}),e(F.A,{attrs:{label:"Address",outlined:"",dense:"",rules:[t=>!!t||"Address is required"]},model:{value:t.newCustomer.address,callback:function(e){t.$set(t.newCustomer,"address",e)},expression:"newCustomer.address"}})],1)],1),e(l.SL,[e(T.A),e(n.A,{attrs:{text:""},on:{click:function(e){t.newCustomerDialog=!1}}},[t._v("Cancel")]),e(n.A,{attrs:{color:"primary",disabled:!t.isCustomerFormValid},on:{click:t.addNewCustomer}},[t._v(" Add Customer ")])],1)],1)],1),e(y.A,{attrs:{"max-width":"500",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.A,[e(l.ri,{staticClass:"primary white--text"},[t._v(" Payment Details "),e(T.A),e(n.A,{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[e(x.A,[t._v("mdi-close")])],1)],1),e(l.OQ,{staticClass:"pt-4"},[e("div",{staticClass:"payment-summary mb-4"},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("span",{staticClass:"text-subtitle-1"},[t._v("Total Amount:")]),e("div",{staticClass:"success pa-2 rounded"},[e("span",{staticClass:"text-h6 white--text"},[t._v("₱"+t._s(t.total))])])])]),e(N.A,{attrs:{grow:""},model:{value:t.paymentTab,callback:function(e){t.paymentTab=e},expression:"paymentTab"}},t._l(t.paymentTypes,(function(s){return e($.A,{key:s,attrs:{disabled:"Credit"===s&&!t.selectedDebtor}},[e(x.A,{attrs:{left:""}},[t._v(t._s(t.getPaymentIcon(s)))]),t._v(" "+t._s(s)+" ")],1)})),1),e(B.A,{staticClass:"mt-4",model:{value:t.paymentTab,callback:function(e){t.paymentTab=e},expression:"paymentTab"}},[e(E.A,[e(F.A,{staticClass:"mb-3",attrs:{label:"Customer Name",outlined:"",placeholder:"Walk-in"},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}),e(F.A,{attrs:{label:"Amount Tendered",prefix:"₱",type:"number",outlined:"","error-messages":t.amountError},on:{input:t.validateAmount},model:{value:t.amountPaid,callback:function(e){t.amountPaid=t._n(e)},expression:"amountPaid"}})],1),e(E.A,[e(F.A,{staticClass:"mb-3",attrs:{label:"Customer Name",outlined:"",placeholder:"Walk-in"},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}),e(F.A,{attrs:{label:"GCash Reference Number",outlined:"",rules:[t=>!!t||"Reference number is required"]},model:{value:t.referenceNo,callback:function(e){t.referenceNo=e},expression:"referenceNo"}}),e(F.A,{attrs:{label:"Amount Paid",prefix:"₱",type:"number",outlined:""},on:{input:t.validateAmount},model:{value:t.amountPaid,callback:function(e){t.amountPaid=t._n(e)},expression:"amountPaid"}})],1),e(E.A,[t.selectedDebtor?e(i.A,{staticClass:"mb-3",attrs:{type:t.debtorCreditAvailable?"success":"warning",dense:"",outlined:""}},[e("div",{staticClass:"d-flex justify-space-between"},[e("span",[t._v("Available Credit:")]),e("span",[t._v("₱"+t._s(t.selectedDebtor.availableCredit.toFixed(2)))])])]):t._e(),t.selectedDebtor?t._e():e("div",{staticClass:"text-center pa-4"},[e(x.A,{attrs:{large:"",color:"warning"}},[t._v("mdi-alert")]),e("p",{staticClass:"mt-2"},[t._v(" Please select a debtor to proceed with credit payment ")])],1),t.selectedDebtor?e(F.A,{attrs:{value:t.selectedDebtor.name,label:"Debtor Name",outlined:"",readonly:""}}):t._e(),t.selectedDebtor?e(F.A,{attrs:{value:t.selectedDebtor.contact,label:"Contact",outlined:"",readonly:""}}):t._e()],1)],1),e(v.A,{staticClass:"my-4"}),e("div",{staticClass:"payment-summary"},[e("div",{staticClass:"d-flex justify-space-between mb-2"},[e("span",{staticClass:"text-subtitle-1"},[t._v("Amount Due:")]),e("span",{staticClass:"text-subtitle-1"},[t._v("₱"+t._s(t.total))])]),"Credit"!==t.paymentTypes[t.paymentTab]?e("div",{staticClass:"d-flex justify-space-between mb-2"},[e("span",{staticClass:"text-subtitle-1"},[t._v("Amount Tendered:")]),e("span",{staticClass:"text-subtitle-1"},[t._v("₱"+t._s(t.amountPaid.toFixed(2)))])]):t._e(),"Credit"!==t.paymentTypes[t.paymentTab]?e("div",{staticClass:"d-flex justify-space-between"},[e("span",{staticClass:"text-h6"},[t._v("Change:")]),e("span",{staticClass:"text-h6",class:{"success--text":t.change>0}},[t._v(" ₱"+t._s(t.change)+" ")])]):t._e()])],1),e(l.SL,{staticClass:"pa-4"},[e(n.A,{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),e(T.A),e(n.A,{attrs:{color:"primary",dark:t.isPaymentValid,disabled:!t.isPaymentValid,loading:t.processingPayment},on:{click:t.processPayment}},[t._v(" Complete Payment ")])],1)],1)],1),e(P.A,{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function({attrs:s}){return[e(n.A,t._b({attrs:{text:""},on:{click:function(e){t.snackbar.show=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.text)+" ")]),e("pay-debt-dialog",{attrs:{debtor:t.selectedDebtorForPayment},on:{"payment-success":t.handlePaymentSuccess,"payment-error":t.handlePaymentError},model:{value:t.showPayDebtDialog,callback:function(e){t.showPayDebtDialog=e},expression:"showPayDebtDialog"}})],1)},V=[],z=(s(4114),s(5353)),O=function(){var t=this,e=t._self._c;return e(y.A,{attrs:{"max-width":"400",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.A,[e(l.ri,{staticClass:"primary white--text"},[t._v(" Pay Debt "),e(T.A),e(n.A,{attrs:{icon:"",dark:""},on:{click:t.closeDialog}},[e(x.A,[t._v("mdi-close")])],1)],1),e(l.OQ,{staticClass:"pt-4"},[e("div",{staticClass:"debtor-info mb-4"},[e("div",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v(" "+t._s(t.debtor.name)+" ")]),e("div",{staticClass:"caption"},[t._v("Outstanding Balance: ₱"+t._s(t.debtor.balance))]),e("div",{staticClass:"caption"},[t._v("Credit Limit: ₱"+t._s(t.debtor.creditLimit))])]),e(N.A,{attrs:{grow:""},model:{value:t.paymentTab,callback:function(e){t.paymentTab=e},expression:"paymentTab"}},t._l(t.paymentTypes,(function(s){return e($.A,{key:s},[e(x.A,{attrs:{left:""}},[t._v(t._s(t.getPaymentIcon(s)))]),t._v(" "+t._s(s)+" ")],1)})),1),e(B.A,{staticClass:"mt-4",model:{value:t.paymentTab,callback:function(e){t.paymentTab=e},expression:"paymentTab"}},[e(E.A,[e(F.A,{attrs:{label:"Amount to Pay",prefix:"₱",type:"number",outlined:"","error-messages":t.amountError},on:{input:t.validateAmount},model:{value:t.amountPaid,callback:function(e){t.amountPaid=t._n(e)},expression:"amountPaid"}})],1),e(E.A,[e(F.A,{staticClass:"mb-3",attrs:{label:"GCash Reference Number",outlined:"",rules:[t=>!!t||"Reference number is required"]},model:{value:t.referenceNo,callback:function(e){t.referenceNo=e},expression:"referenceNo"}}),e(F.A,{attrs:{label:"Amount to Pay",prefix:"₱",type:"number",outlined:"","error-messages":t.amountError},on:{input:t.validateAmount},model:{value:t.amountPaid,callback:function(e){t.amountPaid=t._n(e)},expression:"amountPaid"}})],1)],1)],1),e(l.SL,{staticClass:"pa-4"},[e(n.A,{attrs:{text:""},on:{click:t.closeDialog}},[t._v("Cancel")]),e(T.A),e(n.A,{attrs:{color:"primary",disabled:!t.isPaymentValid,loading:t.processing},on:{click:t.processPayment}},[t._v(" Confirm Payment ")])],1)],1)],1)},q=[],R={name:"PayDebtDialog",props:{value:Boolean,debtor:{type:Object,required:!0}},data(){return{dialog:!1,paymentTab:0,paymentTypes:["Cash","Gcash"],amountPaid:0,amountError:"",referenceNo:"",processing:!1}},computed:{isPaymentValid(){return!(this.amountPaid<=0||this.amountError)&&("Gcash"!==this.paymentTypes[this.paymentTab]||this.referenceNo.length>0)}},watch:{value(t){this.dialog=t},dialog(t){this.$emit("input",t),t||this.resetForm()}},methods:{getPaymentIcon(t){return{Cash:"mdi-cash",Gcash:"mdi-cellphone"}[t]||"mdi-help"},validateAmount(t){t<0?this.amountError="Amount cannot be negative":t>this.debtor.balance?this.amountError="Amount exceeds outstanding balance":this.amountError=""},resetForm(){this.amountPaid=0,this.amountError="",this.referenceNo="",this.paymentTab=0},closeDialog(){this.dialog=!1},async processPayment(){if(this.isPaymentValid&&!this.processing){this.processing=!0;try{const t={debtor:this.debtor._id,amount:this.amountPaid,paymentMethod:this.paymentTypes[this.paymentTab],referenceNumber:this.referenceNo,notes:"Debt Payment"};await this.$store.dispatch("debtorPayment/addPayment",t),this.$emit("payment-success"),this.closeDialog()}catch(t){this.$emit("payment-error",t)}finally{this.processing=!1}}}}},Q=R,M=s(1656),W=(0,M.A)(Q,O,q,!1,null,null,null),j=W.exports,G={name:"POS",components:{PayDebtDialog:j},data(){return{searchQuery:"",selectedCategory:0,categories:["All","Food","Beverages","Snacks","Others"],products:[],filteredProducts:[],cart:[],dialog:!1,paymentTab:0,paymentType:null,amountPaid:0,amountError:"",paymentTypes:["Cash","Gcash","Credit"],referenceNo:"",processingPayment:!1,selectedCustomer:null,customerSearchLoading:!1,newCustomerDialog:!1,isCustomerFormValid:!1,customer:"Walk-in",newCustomer:{name:"",contact:"",address:""},selectedDebtor:null,debtorSearchLoading:!1,debtors:[],customers:[{id:1,name:"John Doe",balance:420,contact:"09123456789",address:"123 Main St.",creditLimit:5e3},{id:2,name:"Jane Smith",balance:1500,contact:"09187654321",address:"456 Oak Ave.",creditLimit:1e4},{id:3,name:"Albert Johnson",balance:0,contact:"09199999999",address:"789 Pine St.",creditLimit:3e3}],cartHeaders:[{text:"Product",value:"name",width:"40%"},{text:"Qty",value:"quantity",align:"center",width:"20%"},{text:"Price",value:"price",align:"right",width:"15%"},{text:"Total",value:"total",align:"right",width:"15%"},{text:"Actions",value:"actions",align:"center",width:"10%"}],snackbar:{show:!1,text:"",color:"success",timeout:3e3},showPayDebtDialog:!1,selectedDebtorForPayment:null}},computed:{...(0,z.aH)(["drawer"]),drawer:{get(){return!1},set(t){this.$store.commit("SET_DRAWER",t)}},subTotal(){return this.cart.reduce(((t,e)=>t+e.price*e.quantity),0)},total(){return this.subTotal.toFixed(2)},change(){return Math.max(0,this.amountPaid-this.subTotal).toFixed(2)},isPaymentValid(){switch(this.paymentTypes[this.paymentTab]){case"Cash":return this.amountPaid>=this.subTotal;case"Gcash":return this.amountPaid>=this.subTotal&&this.referenceNo.length>0;case"Credit":return this.selectedDebtor&&this.debtorCreditAvailable;default:return!1}},debtorCreditAvailable(){if(!this.selectedDebtor)return!1;const t=this.selectedDebtor.availableCredit;return t>=this.subTotal}},watch:{searchQuery:{handler:"filterProducts",immediate:!0},selectedCategory:{handler:"filterProducts",immediate:!0},paymentTab(t){this.paymentType=this.paymentTypes[t],this.resetPaymentForm()},dialog(t){t||this.resetPaymentForm()}},created(){this.drawer=!1,this.fetchInitialData(),this.fetchDebtors()},methods:{...(0,z.PY)({setDrawer:"SET_DRAWER"}),...(0,z.i0)({getProductItems:"product/getItems",addItem:"sale/addItem",getDebtorItems:"debtor/getDebtors"}),openPayDebtDialog(t){this.selectedDebtorForPayment=t,this.showPayDebtDialog=!0},async handlePaymentSuccess(){if(await this.fetchDebtors(),this.showNotification("Payment processed successfully"),this.selectedDebtor){const t=this.debtors.find((t=>t._id===this.selectedDebtor._id));this.selectedDebtor=t}},handlePaymentError(t){this.showNotification("Error processing payment","error")},showNotification(t,e="success"){this.snackbar={show:!0,text:t,color:e,timeout:3e3}},getPaymentIcon(t){const e={Cash:"mdi-cash",Gcash:"mdi-cellphone",Credit:"mdi-credit-card"};return e[t]||"mdi-help"},async fetchInitialData(){try{await this.fetch(),this.showNotification("Products loaded successfully")}catch(t){this.showNotification("Error loading products","error")}},filterProducts(){let t=[...this.products];if(this.selectedCategory>0){const e=this.categories[this.selectedCategory];t=t.filter((t=>t.category===e))}if(this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.upc?.toLowerCase().includes(e)))}this.filteredProducts=t},clearSearch(){this.searchQuery=""},validateQuantity(t){let e=parseInt(t.quantity);if(!(isNaN(e)||e<1))return e>t.availableStocks?(t.quantity=t.availableStocks,void this.showNotification(`Maximum stock limit is ${t.availableStocks}`,"warning")):void(t.quantity=e);t.quantity=1},addToCart(t){if(!t.inStock)return void this.showNotification("Product is out of stock","error");const e=this.cart.find((e=>e.product===t._id||e.variant===t._id));if(e)e.quantity<e.availableStocks?e.quantity++:this.showNotification("Maximum stock limit reached","warning");else{const e={name:t.name,availableStocks:t.stocks,product:t.productId,price:parseFloat(t.price),quantity:1,image:t.image,variant:"Variants"===t.type?t._id:null};this.cart.push(e)}},incrementQuantity(t){t.quantity<t.availableStocks?t.quantity++:this.showNotification("Maximum stock limit reached","warning")},decrementQuantity(t){t.quantity>1&&t.quantity--},removeFromCart(t){const e=this.cart.indexOf(t);e>-1&&(this.cart.splice(e,1),this.showNotification(`${t.name} removed from cart`))},clearCart(){this.cart=[],this.selectedDebtor=null,this.showNotification("Cart cleared")},customFilter(t,e){const s=e.toLowerCase();return t.name.toLowerCase().includes(s)||t.contact?.includes(s)},async searchCustomers(t){this.customerSearchLoading=!0;try{await new Promise((t=>setTimeout(t,500)))}finally{this.customerSearchLoading=!1}},openNewCustomerDialog(){this.newCustomerDialog=!0,this.$nextTick((()=>{this.$refs.customerForm&&this.$refs.customerForm.reset()}))},async addNewCustomer(){if(this.isCustomerFormValid)try{const t={id:this.customers.length+1,name:this.newCustomer.name,contact:this.newCustomer.contact,address:this.newCustomer.address,balance:0,creditLimit:5e3};this.customers.push(t),this.selectedCustomer=t,this.newCustomerDialog=!1,this.newCustomer={name:"",contact:"",address:""},this.showNotification("Customer added successfully")}catch(t){this.showNotification("Error adding customer","error")}},viewCustomerDetails(){this.selectedCustomer&&this.$router.push(`/customers/${this.selectedCustomer.id}`)},openPaymentDialog(){0!==this.cart.length?"Credit"!==this.paymentTypes[this.paymentTab]||this.selectedDebtor?(this.dialog=!0,this.paymentTab=this.selectedDebtor?2:0,this.resetPaymentForm()):this.showNotification("Please select a debtor for credit payment","warning"):this.showNotification("Cart is empty","error")},validateAmount(t){t<0?this.amountError="Amount cannot be negative":t<this.subTotal?this.amountError="Amount is insufficient":this.amountError=""},resetPaymentForm(){this.amountPaid=0,this.amountError="",this.referenceNo="",this.customer="Walk-in",this.paymentType=this.paymentTypes[this.paymentTab]},async processPayment(){if(this.isPaymentValid&&!this.processingPayment){this.processingPayment=!0;try{const t={paymentType:this.paymentType,salesTotal:this.total,customer:this.selectedDebtor?.name,debtorId:this.selectedDebtor?._id,referenceNo:this.referenceNo,items:this.cart.map((t=>({...t,subTotal:t.price*t.quantity})))};"Credit"===this.paymentType&&this.selectedDebtor?(t.amountReceived=this.total,t.change=0,t.debtor={id:this.selectedDebtor._id,name:this.selectedDebtor.name,creditLimit:this.selectedDebtor.creditLimit}):(t.amountReceived=this.amountPaid,t.change=this.change),await this.addItem(t),this.showNotification("Payment processed successfully"),this.dialog=!1,this.clearCart()}catch(t){this.showNotification("Error processing payment","error")}finally{this.processingPayment=!1}}},async fetch(){const t=await this.getProductItems();this.products=t.result.map((t=>"Variants"===t.type&&t.variants?.length>0?t.variants.map((e=>({...t,productId:t._id,name:e.name,upc:e.upc,stocks:e.stocks,_id:e._id,price:e.price,inStock:e.stocks>0,category:t.category}))):{...t,productId:t._id,stocks:t.stocks,inStock:t.stocks>0,category:t.category})).flat(),this.filteredProducts=this.products},async fetchDebtors(){this.debtorSearchLoading=!0;try{const t=await this.getDebtorItems();this.debtors=t}catch(t){this.showNotification("Error loading debtors","error")}finally{this.debtorSearchLoading=!1}}}},H=G,J=(0,M.A)(H,L,V,!1,null,"b4328ea6",null),K=J.exports},1965:function(t,e,s){s.d(e,{A:function(){return m}});var i=s(9375),a=s(4728),r=s(569),n=s(428),o=s(3381),l=s(5471),c=l["default"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),d=s(5803),h=s(1920),u=s(4152),m=(0,d.A)(i.A,n.A,c).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(a.A,{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(r.A,{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(r.A,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t={...i.A.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(t[`v-alert--border-${this.border}`]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||o.A.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,h.q4)("outline","outlined",this)},methods:{genWrapper(){const t=[(0,u.$c)(this,"prepend")||this.__cachedIcon,this.genContent(),this.__cachedBorder,(0,u.$c)(this,"append"),this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},(0,u.$c)(this))},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},7678:function(t,e,s){s(29);var i=s(4312),a=s(7112),r=s(8041),n=s(4152);const o={...i.v,offsetY:!0,offsetOverflow:!0,transition:!1};e.A=i.A.extend({name:"v-autocomplete",props:{autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,s)=>s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:i.A.options.props.menuProps.type,default:()=>o},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...i.A.options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map((t=>this.getValue(t)))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some((t=>!this.hasItem(t))):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((t=>{const e=(0,n.TD)(t,this.itemText),s=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),s)}))},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch!==t&&(this.lazySearch=t,this.$emit("update:search-input",t))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=i.A.options.computed.$_menuProps.call(this);return t.contentClass=`v-autocomplete__content ${t.contentClass||""}`.trim(),{...o,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find((t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue))))},listData(){const t=i.A.options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=null)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){if(t!==e){if(!this.autoSelectFirst){const s=e[this.$refs.menu.listIndex];s?this.setMenuIndex(t.findIndex((t=>t===s))):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick((()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&t.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))}))}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===n.uP.left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===n.uP.right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==n.uP.backspace&&t!==n.uP.delete||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const i=this.selectedItems.length,a=t!==i-1?t:t-1,r=this.selectedItems[a];r?this.selectItem(e):this.setValue(this.multiple?[]:null),this.selectedIndex=a},clearableCallback(){this.internalSearch=null,i.A.options.methods.clearableCallback.call(this)},genInput(){const t=a.A.options.methods.genInput.call(this);return t.data=(0,r.Ay)(t.data,{attrs:{"aria-activedescendant":(0,n.no)(this.$refs.menu,"activeTile.id"),autocomplete:(0,n.no)(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=i.A.options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?i.A.options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,s=e.value;e.value&&this.activateMenu(),this.multiple||""!==s||this.deleteCurrentItem(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[n.uP.home,n.uP.end].includes(e)||i.A.options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){i.A.options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){i.A.options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){i.A.options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick((()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))}))},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){var e,s;if(-1===this.selectedIndex)return;const i=this.selectedItems[this.selectedIndex],a=this.getText(i);null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",a),null===(s=t.clipboardData)||void 0===s||s.setData("text/vnd.vuetify.autocomplete.item+plain",a),t.preventDefault()}}})},174:function(t,e,s){s(4114);var i=s(5803),a=s(7717),r=s(7540),n=s(4152);e.A=(0,i.A)(a.A,(0,r.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},(0,n.$c)(this))}})},5420:function(t,e,s){s.d(e,{A:function(){return m}});s(4114);var i=s(1677),a=s(7282),r=s(5803),n=s(4152),o=(0,r.A)(a.A).extend({name:"v-responsive",props:{aspectRatio:[String,Number],contentClass:String},computed:{computedAspectRatio(){return Number(this.aspectRatio)},aspectStyle(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-responsive__content",class:this.contentClass},(0,n.$c)(this))}},render(t){return t("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),l=o,c=s(3381),d=s(8041),h=s(1920);const u="undefined"!==typeof window&&"IntersectionObserver"in window;var m=(0,r.A)(l,c.A).extend({name:"v-img",directives:{intersect:i.A},props:{alt:String,contain:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},position:{type:String,default:"center center"},sizes:String,src:{type:[String,Object],default:""},srcset:String,transition:{type:[Boolean,String],default:"fade-transition"}},data(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0,naturalWidth:void 0,hasError:!1}},computed:{computedAspectRatio(){return Number(this.normalisedSrc.aspect||this.calculatedAspectRatio)},normalisedSrc(){return this.src&&"object"===typeof this.src?{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect)}:{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||0)}},__cachedImage(){if(!(this.normalisedSrc.src||this.normalisedSrc.lazySrc||this.gradient))return[];const t=[],e=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&t.push(`linear-gradient(${this.gradient})`),e&&t.push(`url("${e}")`);const s=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:t.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[s]):s}},watch:{src(){this.isLoading?this.loadImage():this.init(void 0,void 0,!0)},"$vuetify.breakpoint.width":"getSrc"},mounted(){this.init()},methods:{init(t,e,s){if(!u||s||this.eager){if(this.normalisedSrc.lazySrc){const t=new Image;t.src=this.normalisedSrc.lazySrc,this.pollForSize(t,null)}this.normalisedSrc.src&&this.loadImage()}},onLoad(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src),this.image&&(this.normalisedSrc.src.endsWith(".svg")||this.normalisedSrc.src.startsWith("data:image/svg+xml"))&&(this.image.naturalHeight&&this.image.naturalWidth?(this.naturalWidth=this.image.naturalWidth,this.calculatedAspectRatio=this.image.naturalWidth/this.image.naturalHeight):this.calculatedAspectRatio=1)},onError(){this.hasError=!0,this.$emit("error",this.src)},getSrc(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage(){const t=new Image;this.image=t,t.onload=()=>{t.decode?t.decode().catch((t=>{(0,h.OP)(`Failed to decode image, trying to render anyway\n\nsrc: ${this.normalisedSrc.src}`+(t.message?`\nOriginal error: ${t.message}`:""),this)})).then(this.onLoad):this.onLoad()},t.onerror=this.onError,this.hasError=!1,this.sizes&&(t.sizes=this.sizes),this.normalisedSrc.srcset&&(t.srcset=this.normalisedSrc.srcset),t.src=this.normalisedSrc.src,this.$emit("loadstart",this.normalisedSrc.src),this.aspectRatio||this.pollForSize(t),this.getSrc()},pollForSize(t,e=100){const s=()=>{const{naturalHeight:i,naturalWidth:a}=t;i||a?(this.naturalWidth=a,this.calculatedAspectRatio=a/i):t.complete||!this.isLoading||this.hasError||null==e||setTimeout(s,e)};s()},genContent(){const t=l.options.methods.genContent.call(this);return this.naturalWidth&&this._b(t.data,"div",{style:{width:`${this.naturalWidth}px`}}),t},__genPlaceholder(){const t=(0,n.$c)(this,"placeholder");if(t){const e=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},t)]:[];return this.transition?this.$createElement("transition",{props:{appear:!0,name:this.transition}},e):e[0]}}},render(t){const e=l.options.render.call(this,t),s=(0,d.Ay)(e.data,{staticClass:"v-image",attrs:{"aria-label":this.alt,role:this.alt?"img":void 0},class:this.themeClasses,directives:u?[{name:"intersect",modifiers:{once:!0},value:{handler:this.init,options:this.options}}]:void 0});return e.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],t(e.tag,s,e.children)}})},7150:function(t,e,s){s.d(e,{A:function(){return h}});var i=s(8184),a=s(8743),r=s(3381),n=s(428),o=s(6763),l=s(5803),c=s(4152),d=s(1920),h=(0,l.A)(i.A,a.A,n.A,(0,o.P)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:r.A.options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:e,footer:s,insetFooter:i,left:a,right:r,top:n}=this.$vuetify.application;return{paddingBottom:(0,c.Dg)(e+s+i),paddingLeft:(0,c.Dg)(a),paddingRight:(0,c.Dg)(r),paddingTop:(0,c.Dg)(t+n)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&(0,d.rq)("auto-height",this),0==this.timeout&&(0,d.CI)('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,c.$c)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[(0,c.$c)(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:i.A.options.computed.classes.call(this),style:i.A.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout((()=>{this.isActive=!1}),t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},29:function(){}}]);
//# sourceMappingURL=408.9e92e88b.js.map