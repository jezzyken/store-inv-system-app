{"version":3,"file":"js/822.356539c9.js","mappings":"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","sources":["webpack://vue2/./src/views/sales/SalesForm.vue","webpack://vue2/src/views/sales/SalesForm.vue","webpack://vue2/./src/views/sales/SalesForm.vue?7390","webpack://vue2/./src/views/sales/SalesForm.vue?4003"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.isLoading)?_c('v-container',[_c('v-sheet',{staticClass:\"pa-5\",attrs:{\"elevation\":\"1\"}},[_c('p',{staticClass:\"text-button\"},[_vm._v(\"Product Information\")]),_c('v-divider',{staticClass:\"mb-5\"}),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-menu',{ref:\"menu1\",attrs:{\"close-on-content-click\":false,\"return-value\":_vm.items.date,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},on:{\"update:returnValue\":function($event){return _vm.$set(_vm.items, \"date\", $event)},\"update:return-value\":function($event){return _vm.$set(_vm.items, \"date\", $event)}},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"Date\",\"prepend-inner-icon\":\"mdi-calendar\",\"readonly\":\"\",\"outlined\":\"\"},model:{value:(_vm.items.date),callback:function ($$v) {_vm.$set(_vm.items, \"date\", $$v)},expression:\"items.date\"}},'v-text-field',attrs,false),on))]}}],null,false,2585148267),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-date-picker',{attrs:{\"no-title\":\"\",\"scrollable\":\"\"},model:{value:(_vm.items.date),callback:function ($$v) {_vm.$set(_vm.items, \"date\", $$v)},expression:\"items.date\"}},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"#000033\"},on:{\"click\":function($event){_vm.menu = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"#000033\"},on:{\"click\":function($event){return _vm.$refs.menu1.save(_vm.items.date)}}},[_vm._v(\" OK \")])],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Customer\",\"outlined\":\"\"},model:{value:(_vm.items.customer),callback:function ($$v) {_vm.$set(_vm.items, \"customer\", $$v)},expression:\"items.customer\"}})],1)],1)],1),_c('v-sheet',{staticClass:\"pa-5 mt-5\",attrs:{\"elevation\":\"1\"}},[_c('p',{staticClass:\"text-button\"},[_vm._v(\"Sales\")]),_c('v-divider',{staticClass:\"mb-5\"}),_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Product\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Price\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Stocks\")]),_c('th',{staticClass:\"text-center\"},[_vm._v(\"Quantity\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Sub Total\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Actions\")])])]),_c('tbody',_vm._l((_vm.items.stocks),function(stock,i){return _c('tr',{key:i},[_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(_vm._s(stock.name))])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(_vm._s(stock.sellingPrice))])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(_vm._s(stock.availableStocks))])]),_c('td',[_c('div',{staticClass:\"d-flex justify-center\"},[_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"#000033\",\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.incrementQuantity(i)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('div',{staticStyle:{\"width\":\"75px\"}},[_c('v-text-field',{staticClass:\"text-center mx-2\",attrs:{\"outlined\":\"\",\"hide-details\":\"\",\"dense\":\"\"},on:{\"input\":function($event){return _vm.updateSubTotal(i)}},model:{value:(stock.quantity),callback:function ($$v) {_vm.$set(stock, \"quantity\", $$v)},expression:\"stock.quantity\"}})],1),_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"#000033\",\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){return _vm.decrementQuantity(i)}}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1)],1)]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(_vm._s(stock.subTotal.toFixed(2)))])]),_c('td',[_c('v-btn',{attrs:{\"dark\":\"\",\"color\":\"error\",\"small\":\"\"},on:{\"click\":function($event){return _vm.onDeleteItem(stock, i)}}},[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1)],1)])}),0)]},proxy:true}],null,false,111216510)}),_c('v-row',{staticClass:\"mt-5\",attrs:{\"justify\":\"end\"}},[_c('v-simple-table',{staticClass:\"outside-bordered-table\",staticStyle:{\"width\":\"30%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('tbody',[_c('tr',[_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"Total\")])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"P \"+_vm._s(_vm.salesTotal))])])]),_c('tr',[_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"Delivery Fee\")])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"P \"+_vm._s(_vm.deliveryFee))])])]),_c('tr',[_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"Discount\")])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"P \"+_vm._s(_vm.discount))])])]),_c('tr',[_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"Grand total\")])]),_c('td',{staticClass:\"pa-5\"},[_c('span',[_vm._v(\"P \"+_vm._s(_vm.grandTotal))])])])])]},proxy:true}],null,false,4019076521)})],1)],1),(_vm.items.stocks != 0)?_c('v-sheet',{staticClass:\"pa-5 mt-5\",attrs:{\"elevation\":\"1\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"3\"}},[_c('v-text-field',{attrs:{\"label\":\"Discount\",\"outlined\":\"\",\"disabled\":\"\"},model:{value:(_vm.items.discount),callback:function ($$v) {_vm.$set(_vm.items, \"discount\", $$v)},expression:\"items.discount\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"3\"}},[_c('v-select',{attrs:{\"label\":\"Payment\",\"items\":_vm.payment,\"outlined\":\"\",\"disabled\":\"\"},model:{value:(_vm.items.paymentType),callback:function ($$v) {_vm.$set(_vm.items, \"paymentType\", $$v)},expression:\"items.paymentType\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"3\"}},[_c('v-text-field',{attrs:{\"label\":\"Cash\",\"outlined\":\"\",\"disabled\":\"\"},on:{\"input\":_vm.onAddAmount},model:{value:(_vm.items.amountReceived),callback:function ($$v) {_vm.$set(_vm.items, \"amountReceived\", $$v)},expression:\"items.amountReceived\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"3\"}},[_c('v-text-field',{attrs:{\"label\":\"Change\",\"outlined\":\"\",\"disabled\":\"\"},model:{value:(_vm.items.change),callback:function ($$v) {_vm.$set(_vm.items, \"change\", $$v)},expression:\"items.change\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Notes\",\"outlined\":\"\"},model:{value:(_vm.items.notes),callback:function ($$v) {_vm.$set(_vm.items, \"notes\", $$v)},expression:\"items.notes\"}})],1)],1)],1):_vm._e(),_c('v-row',{staticClass:\"ma-0 mt-6\",attrs:{\"justify\":\"end\"}},[_c('v-btn',{attrs:{\"dark\":\"\",\"color\":_vm.buttonState.color},on:{\"click\":_vm.buttonState.action}},[_vm._v(_vm._s(_vm.buttonState.label))]),_c('div',{staticClass:\"ma-1\"}),_c('v-btn',[_vm._v(\"clear\")])],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container v-if=\"!isLoading\">\n    <v-sheet elevation=\"1\" class=\"pa-5\">\n      <p class=\"text-button\">Product Information</p>\n      <v-divider class=\"mb-5\" />\n      <v-row>\n        <v-col cols=\"12\" md=\"6\">\n          <v-menu\n            ref=\"menu1\"\n            v-model=\"menu\"\n            :close-on-content-click=\"false\"\n            :return-value.sync=\"items.date\"\n            transition=\"scale-transition\"\n            offset-y\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"items.date\"\n                label=\"Date\"\n                prepend-inner-icon=\"mdi-calendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n                outlined\n              ></v-text-field>\n            </template>\n            <v-date-picker v-model=\"items.date\" no-title scrollable>\n              <v-spacer></v-spacer>\n              <v-btn text color=\"#000033\" @click=\"menu = false\"> Cancel </v-btn>\n              <v-btn text color=\"#000033\" @click=\"$refs.menu1.save(items.date)\">\n                OK\n              </v-btn>\n            </v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"12\" md=\"6\">\n          <v-text-field\n            v-model=\"items.customer\"\n            label=\"Customer\"\n            outlined\n          ></v-text-field>\n        </v-col>\n\n        <!-- <v-col cols=\"12\">\n          <div class=\"d-flex\">\n            <v-select\n              v-model=\"items.product\"\n              label=\"Products\"\n              :items=\"products\"\n              item-text=\"name\"\n              item-value=\"productCode\"\n              outlined\n              @change=\"onSelectItem\"\n              return-object\n            ></v-select>\n          </div>\n        </v-col> -->\n      </v-row>\n    </v-sheet>\n\n    <v-sheet elevation=\"1\" class=\"pa-5 mt-5\">\n      <p class=\"text-button\">Sales</p>\n      <v-divider class=\"mb-5\" />\n      <v-simple-table>\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th class=\"text-left\">Product</th>\n              <th class=\"text-left\">Price</th>\n              <th class=\"text-left\">Stocks</th>\n              <th class=\"text-center\">Quantity</th>\n              <th class=\"text-left\">Sub Total</th>\n              <th class=\"text-left\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(stock, i) in items.stocks\" :key=\"i\">\n              <td class=\"pa-5\">\n                <span>{{ stock.name }}</span>\n              </td>\n              <td class=\"pa-5\">\n                <span>{{ stock.sellingPrice }}</span>\n              </td>\n              <td class=\"pa-5\">\n                <span>{{ stock.availableStocks }}</span>\n              </td>\n              <td>\n                <div class=\"d-flex justify-center\">\n                  <v-btn\n                    dark\n                    color=\"#000033\"\n                    small\n                    fab\n                    @click=\"incrementQuantity(i)\"\n                  >\n                    <v-icon>mdi-plus</v-icon>\n                  </v-btn>\n                  <div style=\"width: 75px\">\n                    <v-text-field\n                      v-model=\"stock.quantity\"\n                      class=\"text-center mx-2\"\n                      outlined\n                      hide-details\n                      dense\n                      @input=\"updateSubTotal(i)\"\n                    ></v-text-field>\n                  </div>\n                  <v-btn\n                    dark\n                    color=\"#000033\"\n                    small\n                    fab\n                    @click=\"decrementQuantity(i)\"\n                  >\n                    <v-icon>mdi-minus</v-icon>\n                  </v-btn>\n                </div>\n              </td>\n              <td class=\"pa-5\">\n                <span>{{ stock.subTotal.toFixed(2) }}</span>\n              </td>\n              <td>\n                <v-btn dark color=\"error\" small @click=\"onDeleteItem(stock, i)\">\n                  <v-icon>mdi-trash-can-outline</v-icon>\n                </v-btn>\n              </td>\n            </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n\n      <v-row justify=\"end\" class=\"mt-5\">\n        <v-simple-table style=\"width: 30%\" class=\"outside-bordered-table\">\n          <template v-slot:default>\n            <tbody>\n              <tr>\n                <td class=\"pa-5\">\n                  <span>Total</span>\n                </td>\n                <td class=\"pa-5\">\n                  <span>P {{ salesTotal }}</span>\n                </td>\n              </tr>\n              <tr>\n                <td class=\"pa-5\">\n                  <span>Delivery Fee</span>\n                </td>\n                <td class=\"pa-5\">\n                  <span>P {{ deliveryFee }}</span>\n                </td>\n              </tr>\n              <tr>\n                <td class=\"pa-5\">\n                  <span>Discount</span>\n                </td>\n                <td class=\"pa-5\">\n                  <span>P {{ discount }}</span>\n                </td>\n              </tr>\n              <tr>\n                <td class=\"pa-5\">\n                  <span>Grand total</span>\n                </td>\n                <td class=\"pa-5\">\n                  <span>P {{ grandTotal }}</span>\n                </td>\n              </tr>\n            </tbody>\n          </template>\n        </v-simple-table>\n      </v-row>\n    </v-sheet>\n    <v-sheet elevation=\"1\" class=\"pa-5 mt-5\" v-if=\"items.stocks != 0\">\n      <v-row>\n        <v-col cols=\"12\" md=\"3\">\n          <v-text-field\n            v-model=\"items.discount\"\n            label=\"Discount\"\n            outlined\n            disabled\n          ></v-text-field>\n        </v-col>\n        <v-col cols=\"12\" md=\"3\">\n          <v-select\n            v-model=\"items.paymentType\"\n            label=\"Payment\"\n            :items=\"payment\"\n            outlined\n            disabled\n          ></v-select>\n        </v-col>\n        <v-col cols=\"12\" md=\"3\">\n          <v-text-field\n            v-model=\"items.amountReceived\"\n            label=\"Cash\"\n            outlined\n            @input=\"onAddAmount\"\n            disabled\n          ></v-text-field>\n        </v-col>\n        <v-col cols=\"12\" md=\"3\">\n          <v-text-field\n            v-model=\"items.change\"\n            label=\"Change\"\n            outlined\n            disabled\n          ></v-text-field>\n        </v-col>\n\n        <v-col cols=\"12\" md=\"12\">\n          <v-text-field\n            v-model=\"items.notes\"\n            label=\"Notes\"\n            outlined\n          ></v-text-field>\n        </v-col>\n      </v-row>\n    </v-sheet>\n\n    <v-row justify=\"end\" class=\"ma-0 mt-6\">\n      <v-btn dark :color=\"buttonState.color\" @click=\"buttonState.action\">{{\n        buttonState.label\n      }}</v-btn>\n      <div class=\"ma-1\"></div>\n      <v-btn>clear</v-btn>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n/*eslint-disable */\nimport { mapActions } from \"vuex\";\nimport moment from \"moment\";\n\nexport default {\n  props: {\n    mode: String,\n  },\n  data() {\n    return {\n      items: {\n        hasDelivery: null,\n        delivery: {\n          deliveryDate: new Date(\n            Date.now() - new Date().getTimezoneOffset() * 60000\n          )\n            .toISOString()\n            .substr(0, 10),\n        },\n        stocks: [],\n        date: new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\n          .toISOString()\n          .substr(0, 10),\n      },\n      isLoading: false,\n      category: [],\n      unit: [],\n      prices: [],\n      brand: [],\n      products: [],\n      stocks: [],\n      variants: [],\n      colors: [],\n      variantColorItems: [],\n      variantId: null,\n      productId: null,\n      payment: [\"Cash\", \"Dedit\"],\n      deleteItemId: [],\n      menu: false,\n      deliveryDateMenu: false,\n    };\n  },\n\n  computed: {\n    buttonState() {\n      let state = {\n        color: \"warning\",\n        action: this.onUpdateItem,\n        label: \"update\",\n      };\n      if (this.mode === \"add\") {\n        state = {\n          color: \"#000033\",\n          action: this.onAddItem,\n          label: \"add\",\n        };\n      }\n      return state;\n    },\n\n    salesTotal() {\n      const subtotal = this.items.stocks.reduce((total, stock) => {\n        const subtotal =\n          parseFloat(stock.sellingPrice) * parseInt(stock.quantity || 0);\n        return total + subtotal;\n      }, 0);\n\n      return subtotal.toFixed(2);\n    },\n\n    grandTotal() {\n      const subtotal = this.items.stocks.reduce((total, stock) => {\n        const subtotal =\n          parseFloat(stock.sellingPrice) * parseInt(stock.quantity || 0);\n        return total + subtotal;\n      }, 0);\n\n      return (subtotal + +this.deliveryFee - this.discount).toFixed(2);\n    },\n\n    deliveryFee() {\n      if (this.items.hasDelivery) {\n        const fee = this.items.delivery.deliveryFee;\n        return fee ? parseFloat(fee).toFixed(2) : \"0.00\";\n      }\n      return \"0.00\";\n    },\n\n    discount() {\n      return this.items.discount\n        ? parseFloat(this.items.discount).toFixed(2)\n        : \"0.00\";\n    },\n  },\n\n  async created() {\n    this.fetch();\n    if (this.$route?.params?.id) {\n      this.initialize();\n    }\n  },\n\n  methods: {\n    ...mapActions({\n      getProductItems: \"product/getItems\",\n      getSalesById: \"sale/getItemById\",\n      getDeliveryBySalesItemId: \"delivery/getDeliveryBySalesItemId\",\n      addItem: \"sale/addItem\",\n      updateItem: \"sale/updateItem\",\n      deleteItem: \"stockItem/deleteItem\",\n    }),\n\n    async initialize() {\n      this.isLoading = true;\n      try {\n        const [salesResponse, deliveryResponse] = await Promise.all([\n          this.getSalesById(this.$route.params.id),\n          this.getDeliveryBySalesItemId(this.$route.params.id),\n        ]);\n\n        const sale = salesResponse.result[0];\n\n        console.log(sale);\n\n        if (deliveryResponse.result.length > 0) {\n          const delivery = deliveryResponse.result[0];\n          if (delivery.deliveryDate) {\n            delivery.deliveryDate = moment(delivery.deliveryDate).format(\n              \"YYYY-MM-DD\"\n            );\n          }\n          Object.assign(this.items.delivery, delivery);\n        }\n\n        const saleFields = [\n          \"date\",\n          \"referenceCode\",\n          \"amountReceived\",\n          \"discount\",\n          \"salesTotal\",\n          \"paymentType\",\n          \"change\",\n          \"discount\",\n          \"grandTotal\",\n          \"hasDelivery\",\n          \"notes\",\n          \"customer\",\n        ];\n        saleFields.forEach((field) => {\n          if (field === \"date\") {\n            this.$set(\n              this.items,\n              field,\n              moment(sale[field]).format(\"YYYY-MM-DD\")\n            );\n          } else {\n            this.$set(this.items, field, sale[field]);\n          }\n        });\n\n        for (let item of sale.items) {\n          const data = {\n            name: item.product.name,\n            quantity: item.quantity,\n            availableStocks: item.product.stocks,\n            product: item.product._id,\n            _id: item.product._id,\n            items_id: item.item_id,\n            sellingPrice: item.product.price,\n            subTotal:\n              parseFloat(item.product.price) * parseInt(item.quantity || 0),\n          };\n\n          if (item.product.type === \"Variants\") {\n            const variantInfo = item.product.variants.find(\n              (variant) => variant._id == item.variant\n            );\n\n            console.log(variantInfo)\n            data.variant = variantInfo._id;\n            data.name = variantInfo.name;\n            data.availableStocks = variantInfo.stocks;\n            data.sellingPrice = variantInfo.price;\n            data.subTotal =\n              parseFloat(variantInfo.price) * parseInt(item.quantity || 0);\n          }\n          this.items.stocks.push(data);\n        }\n\n        // this.items.stocks = sale.items.map((item) => {\n        //   const baseData = {\n        //     name: item.product.name,\n        //     quantity: item.quantity,\n        //     availableStocks: item.product.stocks,\n        //     product: item.product._id,\n        //     items_id: item.item_id,\n        //     sellingPrice: item.product.sellingPrice,\n        //     subTotal:\n        //       parseFloat(item.product.sellingPrice) *\n        //       parseInt(item.quantity || 0),\n        //   };\n\n        //   if (item.product.type === \"Variants\") {\n        //     return {\n        //       ...baseData,\n        //       variant: item.variant._id,\n        //       name: `${item.product.name}-${item.variant.name}`,\n        //       availableStocks: item.variant.stocks,\n        //       sellingPrice: item.variant.sellingPrice,\n        //       subTotal:\n        //         parseFloat(item.variant.sellingPrice) *\n        //         parseInt(item.quantity || 0),\n        //     };\n        //   }\n\n        //   return baseData;\n        // });\n      } catch (error) {\n        console.error(\"Error initializing data:\", error);\n      } finally {\n        this.isLoading = false;\n      }\n    },\n\n    async onSelectItem(item) {\n      const data = {\n        product: item._id,\n        name: item.name,\n        availableStocks: item.availableStocks,\n        sellingPrice: item.sellingPrice,\n        quantity: 0,\n        subTotal: 0,\n      };\n\n      if (item.type === \"Variants\") {\n        data.variant = item.variants._id;\n        data.sellingPrice = item.variants.sellingPrice;\n      }\n\n      this.items.stocks.push(data);\n    },\n\n    async onAddItem() {\n      const data = {\n        ...this.items,\n        stocks: this.items.stocks,\n        salesTotal: this.salesTotal,\n        grandTotal: this.grandTotal,\n      };\n\n      await this.addItem(data);\n      this.$router.push(\"/sale\");\n    },\n\n    async onUpdateItem() {\n      const data = {\n        id: this.$route?.params?.id,\n        data: {\n          ...this.items,\n          salesTotal: this.salesTotal,\n          grandTotal: this.grandTotal,\n          deletedItems: this.deleteItemId,\n        },\n      };\n      await this.updateItem(data);\n      this.$router.push(\"/sale\");\n    },\n\n    async onDeleteItem(stock = null, i) {\n      this.items.stocks.splice(i, 1);\n      if (stock.items_id) {\n        if (!this.deleteItemId.includes(stock.items_id)) {\n          this.deleteItemId.push(stock.items_id);\n        }\n      }\n    },\n\n    async fetch() {\n      const products = await this.getProductItems();\n      this.products = products.result.map((product) => {\n        if (product.type === \"Variants\") {\n          product.name = `${product.name}-${product.variants.name}`;\n          product.productCode = product.variants.productCode;\n        }\n        return product;\n      });\n    },\n    updateSubTotal(index) {\n      const stock = this.items.stocks[index];\n      stock.subTotal =\n        parseFloat(stock.sellingPrice) * parseInt(stock.quantity || 0);\n    },\n\n    incrementQuantity(index) {\n      this.items.stocks[index].quantity++;\n      this.updateSubTotal(index);\n    },\n\n    decrementQuantity(index) {\n      if (this.items.stocks[index].quantity > 0) {\n        this.items.stocks[index].quantity--;\n        this.updateSubTotal(index);\n      }\n    },\n\n    onAddAmount(amount) {\n      if (\n        typeof +amount === \"number\" &&\n        +amount !== 0 &&\n        +amount >= this.grandTotal\n      ) {\n        this.items.change = amount - this.grandTotal;\n      } else {\n        this.items.change = 0;\n      }\n    },\n\n    onSelectDelivery(delivery) {\n      console.log(delivery);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-text-field .v-input__control .v-input__slot {\n  min-width: 30px !important;\n  display: flex !important;\n  align-items: center !important;\n}\n\n.outside-bordered-table {\n  border: 1px solid rgba(0, 0, 0, 0.12);\n}\n\n.outside-bordered-table thead {\n  background-color: rgba(0, 0, 0, 0.03);\n}\n\n.outside-bordered-table thead th {\n  font-weight: bold;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SalesForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SalesForm.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SalesForm.vue?vue&type=template&id=44f0d0d0&scoped=true\"\nimport script from \"./SalesForm.vue?vue&type=script&lang=js\"\nexport * from \"./SalesForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./SalesForm.vue?vue&type=style&index=0&id=44f0d0d0&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44f0d0d0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["ref","attrs","_vm","scopedSlots","key","fn","items","$set","on","callback","expression","model","value","_c","customer","_v","staticClass","_u","i","$event","staticStyle","stock","decrementQuantity","onDeleteItem","grandTotal","stocks","payment","buttonState","staticRenderFns","props","mode","String","data","hasDelivery","delivery","deliveryDate","Date","now","getTimezoneOffset","toISOString","substr","date","isLoading","category","unit","prices","brand","products","variants","colors","variantColorItems","variantId","productId","deleteItemId","menu","deliveryDateMenu","computed","state","color","action","onUpdateItem","label","onAddItem","salesTotal","subtotal","reduce","total","parseFloat","sellingPrice","parseInt","quantity","toFixed","deliveryFee","discount","fee","created","fetch","$route","params","id","initialize","methods","mapActions","getProductItems","getSalesById","getDeliveryBySalesItemId","addItem","updateItem","deleteItem","salesResponse","deliveryResponse","Promise","all","sale","result","console","log","length","moment","format","Object","assign","saleFields","forEach","field","item","name","product","availableStocks","_id","items_id","item_id","price","subTotal","type","variantInfo","find","variant","push","error","onSelectItem","$router","deletedItems","splice","includes","map","productCode","updateSubTotal","index","incrementQuantity","onAddAmount","amount","change","onSelectDelivery","component","render"],"sourceRoot":""}