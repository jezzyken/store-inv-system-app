"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[988],{4984:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var s=a(3740),r=a(3698),i=a(2938),n=a(3180),o=a(4414),l=a(3449),c=a(6814),d=a(1446),u=a(9991),m=a(9483),v=a(6930),p=a(7683),y=a(2756),g=a(4312),_=a(2498),f=a(1034),h=a(7112),x=function(){var t=this,e=t._self._c;return e(l.A,{attrs:{fluid:""}},[e(r.A,{staticClass:"mb-4"},[e(i.OQ,[e(y.A,{attrs:{align:"center"}},[e(o.A,{attrs:{cols:"12",md:"4"}},[e(g.A,{attrs:{items:t.reportTypes,label:"Report Type",outlined:"",dense:""},model:{value:t.selectedReportType,callback:function(e){t.selectedReportType=e},expression:"selectedReportType"}})],1),"sales"===t.selectedReportType?e(o.A,{attrs:{cols:"12",md:"8"}},[e(y.A,[e(o.A,{attrs:{cols:"5"}},[e(p.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(h.A,t._g(t._b({attrs:{label:"Start Date","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:t.dateRange.startDate,callback:function(e){t.$set(t.dateRange,"startDate",e)},expression:"dateRange.startDate"}},"v-text-field",s,!1),a))]}}],null,!1,1400992922),model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[e(d.A,{on:{input:function(e){t.startDateMenu=!1}},model:{value:t.dateRange.startDate,callback:function(e){t.$set(t.dateRange,"startDate",e)},expression:"dateRange.startDate"}})],1)],1),e(o.A,{attrs:{cols:"5"}},[e(p.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(h.A,t._g(t._b({attrs:{label:"End Date","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:t.dateRange.endDate,callback:function(e){t.$set(t.dateRange,"endDate",e)},expression:"dateRange.endDate"}},"v-text-field",s,!1),a))]}}],null,!1,474719386),model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[e(d.A,{on:{input:function(e){t.endDateMenu=!1}},model:{value:t.dateRange.endDate,callback:function(e){t.$set(t.dateRange,"endDate",e)},expression:"dateRange.endDate"}})],1)],1),e(o.A,{attrs:{cols:"2"}},[e(s.A,{staticClass:"mt-2",attrs:{color:"primary",loading:t.loading},on:{click:t.generateReport}},[t._v(" Generate ")])],1)],1)],1):t._e()],1)],1)],1),"sales"===t.selectedReportType?[t.salesSummary?e(y.A,{staticClass:"mb-4"},[e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Sales")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(t._s(t.salesSummary.totalSales))])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Revenue")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" ₱"+t._s(t.formatNumber(t.salesSummary.totalRevenue))+" ")])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Profit")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" ₱"+t._s(t.formatNumber(t.salesSummary.totalProfit))+" ")])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Average Profit")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" ₱"+t._s(t.formatNumber(t.salesSummary.averageProfit))+" ")])])],1)],1)],1):t._e(),e(r.A,[e(i.ri,[e(y.A,{attrs:{align:"center"}},[e(o.A,{attrs:{cols:"12",sm:"6"}},[t._v(" Sales List ")]),e(o.A,{attrs:{cols:"12",sm:"6"}},[e(h.A,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),e(c.A,{attrs:{headers:t.salesHeaders,items:t.salesReport,search:t.search,loading:t.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[10,20,50]}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(t.formatDate(e.date))+" ")]}},{key:"item.totalRevenue",fn:function({item:e}){return[t._v(" ₱"+t._s(t.formatNumber(e.totalRevenue))+" ")]}},{key:"item.profit",fn:function({item:e}){return[t._v(" ₱"+t._s(t.formatNumber(e.profit))+" ")]}},{key:"item.actions",fn:function({item:a}){return[e(v.A,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewSaleDetails(a)}}},[t._v(" mdi-eye ")]),e(v.A,{attrs:{small:""},on:{click:function(e){return t.printSale(a)}}},[t._v(" mdi-printer ")])]}}],null,!1,4060919809)})],1)]:t._e(),"inventory"===t.selectedReportType?[t.inventorySummary?e(y.A,{staticClass:"mb-4"},[e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Products")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" "+t._s(t.inventorySummary.totalProducts)+" ")])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Stock")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(t._s(t.inventorySummary.totalStock))])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Low Stock Items")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" "+t._s(t.inventorySummary.lowStockItems)+" ")])])],1)],1),e(o.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(r.A,{attrs:{outlined:""}},[e(i.OQ,[e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Inventory Value")]),e("div",{staticClass:"text-h4 mt-2"},[t._v(" ₱"+t._s(t.formatNumber(t.inventorySummary.inventoryValue))+" ")])])],1)],1)],1):t._e(),e(r.A,[e(i.ri,[e(y.A,{attrs:{align:"center"}},[e(o.A,{attrs:{cols:"12",sm:"6"}},[t._v(" Inventory List ")]),e(o.A,{attrs:{cols:"12",sm:"6"}},[e(h.A,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),e(c.A,{attrs:{headers:t.inventoryHeaders,items:t.inventoryReport,search:t.search,loading:t.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[10,20,50]}},scopedSlots:t._u([{key:"item.totalStock",fn:function({item:a}){return[e(n.A,{attrs:{color:t.getStockColor(a.totalStock,a.stockAlert),small:""}},[t._v(" "+t._s(a.totalStock)+" ")])]}},{key:"item.cost",fn:function({item:e}){return[t._v(" ₱"+t._s(t.formatNumber(e.cost))+" ")]}},{key:"item.price",fn:function({item:e}){return[t._v(" ₱"+t._s(t.formatNumber(e.price))+" ")]}}],null,!1,2391670947)})],1)]:t._e(),e(u.A,{attrs:{"max-width":"800"},model:{value:t.detailsDialog,callback:function(e){t.detailsDialog=e},expression:"detailsDialog"}},[t.selectedSale?e(r.A,[e(i.ri,{staticClass:"headline"},[t._v(" Sale Details "),e(f.A),e(s.A,{attrs:{icon:""},on:{click:function(e){t.detailsDialog=!1}}},[e(v.A,[t._v("mdi-close")])],1)],1),e(i.OQ,[e(y.A,[e(o.A,{attrs:{cols:"6"}},[e("div",{staticClass:"caption grey--text"},[t._v("Reference Code")]),e("div",[t._v(t._s(t.selectedSale.referenceCode))])]),e(o.A,{attrs:{cols:"6"}},[e("div",{staticClass:"caption grey--text"},[t._v("Date")]),e("div",[t._v(t._s(t.formatDate(t.selectedSale.date)))])]),e(o.A,{attrs:{cols:"6"}},[e("div",{staticClass:"caption grey--text"},[t._v("Customer")]),e("div",[t._v(t._s(t.selectedSale.customer))])]),e(o.A,{attrs:{cols:"6"}},[e("div",{staticClass:"caption grey--text"},[t._v("Payment Type")]),e("div",[t._v(t._s(t.selectedSale.paymentType))])])],1),e(m.A,{staticClass:"my-4"}),e("div",{staticClass:"subtitle-1 mb-2"},[t._v("Items")]),e(_.A,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Variant")]),e("th",[t._v("Quantity")]),e("th",{staticClass:"text-right"},[t._v("Subtotal")])])]),e("tbody",t._l(t.selectedSale.items,(function(a){return e("tr",{key:a.product},[e("td",[t._v(t._s(a.product))]),e("td",[t._v(t._s(a.variant))]),e("td",[t._v(t._s(a.quantity))]),e("td",{staticClass:"text-right"},[t._v("₱"+t._s(t.formatNumber(a.subTotal)))])])})),0)]},proxy:!0}],null,!1,1026752227)}),e(m.A,{staticClass:"my-4"}),e(y.A,[e(o.A,{attrs:{cols:"12",sm:"6","offset-sm":"6"}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("span",{staticClass:"grey--text"},[t._v("Subtotal:")]),e("span",[t._v("₱"+t._s(t.formatNumber(t.selectedSale.totalRevenue)))])]),e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("span",{staticClass:"grey--text"},[t._v("Discount:")]),e("span",[t._v("₱"+t._s(t.formatNumber(t.selectedSale.discount)))])]),e(m.A,{staticClass:"my-2"}),e("div",{staticClass:"d-flex justify-space-between subtitle-1"},[e("strong",[t._v("Total:")]),e("strong",[t._v("₱"+t._s(t.formatNumber(t.selectedSale.grandTotal)))])])],1)],1)],1),e(i.SL,[e(f.A),e(s.A,{attrs:{color:"primary",text:""},on:{click:function(e){return t.printSale(t.selectedSale)}}},[t._v(" Print ")]),e(s.A,{attrs:{color:"grey",text:""},on:{click:function(e){t.detailsDialog=!1}}},[t._v(" Close ")])],1)],1):t._e()],1)],2)},A=[],S=a(5353),b={name:"ReportView",data(){return{selectedReportType:"sales",reportTypes:[{text:"Sales Report",value:"sales"},{text:"Inventory Report",value:"inventory"}],dateRange:{startDate:(new Date).toISOString().slice(0,10),endDate:(new Date).toISOString().slice(0,10)},startDateMenu:!1,endDateMenu:!1,loading:!1,search:"",detailsDialog:!1,selectedSale:null,salesHeaders:[{text:"Date",value:"date",width:"120px"},{text:"Reference",value:"referenceCode"},{text:"Customer",value:"customer"},{text:"Payment",value:"paymentType"},{text:"Revenue",value:"totalRevenue",align:"right"},{text:"Profit",value:"profit",align:"right"},{text:"Actions",value:"actions",sortable:!1,width:"100px"}],inventoryHeaders:[{text:"Product",value:"name"},{text:"Category",value:"category"},{text:"Brand",value:"brand"},{text:"Stock",value:"totalStock",align:"center"},{text:"Cost",value:"cost",align:"right"},{text:"Price",value:"price",align:"right"}]}},computed:{...(0,S.aH)("reports",["salesReport","salesSummary","inventoryReport","inventorySummary"])},methods:{async generateReport(){this.loading=!0;try{switch(this.selectedReportType){case"sales":await this.$store.dispatch("reports/getSalesReport",this.dateRange);break;case"inventory":await this.$store.dispatch("reports/getInventoryReport");break}}catch(t){this.$toast.error("Error generating report")}finally{this.loading=!1}},viewSaleDetails(t){this.selectedSale=t,this.detailsDialog=!0},formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatNumber(t){return t?.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"},getStockColor(t,e){return t<=0?"error":t<=e?"warning":"success"},async printSale(){try{window.print()}catch(t){this.$toast.error("Error printing sale details")}},exportReport(){try{switch(this.selectedReportType){case"sales":this.$store.dispatch("reports/exportSalesReport",this.dateRange);break;case"inventory":this.$store.dispatch("reports/exportInventoryReport");break}}catch(t){this.$toast.error("Error exporting report")}}},watch:{selectedReportType:{immediate:!0,handler(){this.generateReport()}}}},R=b,k=a(1656),C=(0,k.A)(R,x,A,!1,null,"6216c88e",null),D=C.exports}}]);
//# sourceMappingURL=988.ec0d0c1d.js.map