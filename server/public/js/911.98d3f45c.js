"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[911],{3911:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});var i=a(3740),s=a(3698),r=a(2938),n=a(3180),l=a(4414),o=a(3449),d=a(6814),c=a(9991),u=a(9483),p=a(6930),m=a(8983),h=a(7296),y=a(8924),f=a(2756),g=(a(4114),a(3251)),v=a(7282),b=a(3381),S=a(5803),x=a(4152),C=(0,S.A)(g.A,v.A,b.A).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?{"aria-busy":!this.boilerplate||void 0,"aria-live":this.boilerplate?void 0:"polite","aria-label":this.boilerplate?void 0:this.$vuetify.lang.t(this.loadingText),role:this.boilerplate?void 0:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(t,e){return this.$createElement("div",{staticClass:`v-skeleton-loader__${t} v-skeleton-loader__bone`},e)},genBones(t){const[e,a]=t.split("@"),i=()=>this.genStructure(e);return Array.from({length:a}).map(i)},genStructure(t){let e=[];t=t||this.type||"";const a=this.rootTypes[t]||"";if(t===a);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);a.indexOf(",")>-1?e=this.mapBones(a):a.indexOf("@")>-1?e=this.genBones(a):a&&e.push(this.genStructure(a))}return[this.genBone(t,e)]},genSkeleton(){const t=[];return this.isLoading?t.push(this.genStructure()):t.push((0,x.$c)(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave(t){t.style.setProperty("display","none","important")},resetStyles(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}}),_=a(1034),A=a(7112),w=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{fluid:""}},[e(f.A,[e(l.A,{attrs:{cols:"12",md:"4"}},[e(s.A,{staticClass:"mb-4 rounded-lg",attrs:{elevation:"2"}},[e(r.ri,{staticClass:"primary white--text px-4 py-3"},[e(p.A,{attrs:{left:"",color:"white"}},[t._v("mdi-account")]),t._v(" Debtor Information ")],1),e(r.OQ,{staticClass:"pa-4"},[e(m.A,t._l(t.debtorFields,(function(a,i){return e(h.A,{key:i},[e(y.pr,[e(y.w,{staticClass:"text-caption mb-1"},[t._v(" "+t._s(i)+" ")]),e(y.UZ,{staticClass:"font-weight-medium"},["Credit Limit"===i||"Available Credit"===i?e("span",[t._v("₱")]):t._e(),t._v(" "+t._s(t.debtor[a])+" ")])],1)],1)})),1)],1)],1)],1),e(l.A,{attrs:{cols:"12",md:"8"}},[e(s.A,{staticClass:"rounded-lg",attrs:{elevation:"2"}},[e(r.ri,{staticClass:"px-4 py-3"},[e(p.A,{attrs:{left:""}},[t._v("mdi-history")]),t._v(" Sales History "),e(_.A),e(A.A,{staticClass:"shrink mt-1",staticStyle:{"max-width":"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search transactions",dense:"",outlined:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(d.A,{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.salesHistory,search:t.search,loading:t.loading,"items-per-page":10},scopedSlots:t._u([{key:"loading",fn:function(){return[e(C,{staticClass:"pa-4",attrs:{type:"table-row"}})]},proxy:!0},{key:"item.date",fn:function({item:a}){return[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(t.formatDate(a.date)))])]}},{key:"item.salesTotal",fn:function({item:a}){return[e("span",{staticClass:"success--text font-weight-medium"},[t._v(" ₱"+t._s(t.formatNumber(a.salesTotal))+" ")])]}},{key:"item.amountReceived",fn:function({item:a}){return[e("span",{class:t.getPaymentStatusColor(a)},[t._v(" ₱"+t._s(t.formatNumber(a.amountReceived))+" ")])]}},{key:"item.paymentType",fn:function({item:a}){return[e(n.A,{attrs:{small:"",color:t.getPaymentTypeColor(a.paymentType),"text-color":"white"}},[t._v(" "+t._s(a.paymentType)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[e(i.A,{attrs:{small:"",outlined:"",color:"primary"},on:{click:function(e){return t.viewSaleDetails(a)}}},[e(p.A,{attrs:{left:"",small:""}},[t._v("mdi-eye")]),t._v(" Details ")],1)]}}],null,!0)})],1)],1)],1),e(c.A,{attrs:{"max-width":"800px"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e(s.A,[e(r.ri,{staticClass:"primary white--text"},[e(p.A,{attrs:{left:"",color:"white"}},[t._v("mdi-receipt")]),t._v(" Sale Details "),e(_.A),e("div",{staticClass:"text-subtitle-1"},[t._v(" Ref: "+t._s(t.selectedSale?.referenceCode)+" ")])],1),e(r.OQ,{staticClass:"pa-4"},[e(d.A,{staticClass:"elevation-1 mb-4",attrs:{headers:t.detailHeaders,items:t.selectedSaleItems,"hide-default-footer":""},scopedSlots:t._u([{key:"item.product.price",fn:function({item:e}){return[t._v(" ₱"+t._s(t.formatNumber(e.product.price))+" ")]}},{key:"item.subtotal",fn:function({item:a}){return[e("span",{staticClass:"font-weight-bold"},[t._v(" ₱"+t._s(t.formatNumber(a.product.price*a.quantity))+" ")])]}}],null,!0)}),e(u.A),e(f.A,{staticClass:"mt-4",attrs:{justify:"end"}},[e(l.A,{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"d-flex justify-space-between"},[e("span",{staticClass:"text-subtitle-1"},[t._v("Total:")]),e("span",{staticClass:"text-h6 primary--text"},[t._v(" ₱"+t._s(t.formatNumber(t.calculateTotal))+" ")])])])],1)],1),e(r.SL,{staticClass:"pa-4"},[e(_.A),e(i.A,{attrs:{color:"grey darken-1",text:""},on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Close ")]),e(i.A,{attrs:{color:"primary"},on:{click:t.printReceipt}},[e(p.A,{attrs:{left:""}},[t._v("mdi-printer")]),t._v(" Print ")],1)],1)],1)],1)],1)},k=[],T=a(5353),D={name:"DebtorProfile",data:()=>({debtor:{},salesHistory:[],selectedSale:null,selectedSaleItems:[],search:"",loading:!1,dialogVisible:!1,debtorFields:{Name:"name","Credit Limit":"creditLimit","Available Credit":"availableCredit",Address:"address",Contact:"contact"},headers:[{text:"Date",value:"date",width:"15%"},{text:"Reference",value:"referenceCode",width:"15%"},{text:"Total",value:"salesTotal",width:"15%"},{text:"Received",value:"amountReceived",width:"15%"},{text:"Payment Type",value:"paymentType",width:"20%"},{text:"Actions",value:"actions",sortable:!1,width:"20%"}],detailHeaders:[{text:"Product",value:"product.name",width:"40%"},{text:"Quantity",value:"quantity",width:"20%"},{text:"Price",value:"product.price",width:"20%"},{text:"Subtotal",value:"subtotal",width:"20%"}]}),computed:{calculateTotal(){return this.selectedSaleItems?.length?this.selectedSaleItems.reduce(((t,e)=>t+e.product.price*e.quantity),0):0}},async created(){await this.loadData()},methods:{...(0,T.i0)({getDebtor:"debtor/getDebtor",getDebtorSales:"sale/getDebtorSales"}),async loadData(){this.loading=!0;try{const t=this.$route.params.id,[e,a]=await Promise.all([this.getDebtor(t),this.getDebtorSales(t)]);this.debtor=e,this.salesHistory=a}catch(t){console.error("Error loading debtor data:",t),this.$toast.error("Failed to load debtor data")}finally{this.loading=!1}},formatDate(t){return new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})},formatNumber(t){return t.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})},getPaymentStatusColor(t){const e=t.amountReceived/t.salesTotal;return e>=1?"success--text font-weight-medium":e>=.5?"warning--text font-weight-medium":"error--text font-weight-medium"},getPaymentTypeColor(t){const e={CASH:"success",CREDIT:"warning",PARTIAL:"orange",INSTALLMENT:"blue"};return e[t.toUpperCase()]||"grey"},viewSaleDetails(t){this.selectedSale=t,this.selectedSaleItems=t.items,this.dialogVisible=!0},async printReceipt(){try{await this.$print({ref:this.selectedSale.referenceCode,items:this.selectedSaleItems,total:this.calculateTotal}),this.$toast.success("Receipt printed successfully")}catch(t){console.error("Print error:",t),this.$toast.error("Failed to print receipt")}},isPaymentComplete(t){return t.amountReceived>=t.salesTotal}},watch:{"$route.params.id":{handler:"loadData",immediate:!0}}},P=D,$=a(1656),L=(0,$.A)(P,w,k,!1,null,"4edae4f0",null),B=L.exports},3449:function(t,e,a){a.d(e,{A:function(){return n}});a(158),a(125);var i=a(5471);function s(t){return i.Ay.extend({name:`v-${t}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:a,data:i,children:s}){i.staticClass=`${t} ${i.staticClass||""}`.trim();const{attrs:r}=i;if(r){i.attrs={};const t=Object.keys(r).filter((t=>{if("slot"===t)return!1;const e=r[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}));t.length&&(i.staticClass+=` ${t.join(" ")}`)}return a.id&&(i.domProps=i.domProps||{},i.domProps.id=a.id),e(a.tag,i,s)}})}var r=a(8041),n=s("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:a,children:i}){let s;const{attrs:n}=a;return n&&(a.attrs={},s=Object.keys(n).filter((t=>{if("slot"===t)return!1;const e=n[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}))),e.id&&(a.domProps=a.domProps||{},a.domProps.id=e.id),t(e.tag,(0,r.Ay)(a,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(s||[])}),i)}})}}]);
//# sourceMappingURL=911.98d3f45c.js.map