"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[723],{7964:function(t,e,i){i.r(e),i.d(e,{default:function(){return L}});var s=i(3740),a=i(3698),n=i(2938),o=i(4414),l=i(3449),r=i(6814),d=i(9991),c=i(6930),h=i(5420),m=i(8983),u=i(7296),v=i(8924),g=i(7683),p=i(2756),f=i(1034),A=i(7112),x=i(198),I=function(){var t=this,e=t._self._c;return e(l.A,[e("ViewProductDialogVue",{ref:"product",attrs:{items:t.selectedItems}}),e(r.A,{staticClass:"elevation-1 mt-4",attrs:{headers:t.headers,items:t.items,loading:t.isLoading,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[e(x.A,{attrs:{flat:""}},[e("div",{staticStyle:{width:"400px"}},[e(A.A,{attrs:{filled:"",rounded:"",dense:"","hide-details":"",placeholder:"Search","append-icon":"mdi-filter-variant"},on:{"click:append":t.testToggle},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(f.A),e(d.A,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({}){return[e(s.A,{staticClass:"mb-2",attrs:{color:"#000033",dark:"",to:{name:"AddProduct"},small:""}},[t._v(" new ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(a.A,[e(n.ri,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(n.OQ,[e(l.A,[e(p.A,[e(o.A,{attrs:{cols:"12"}},[e(A.A,{attrs:{label:"Name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1),e(p.A,[e(o.A,{attrs:{cols:"12"}},[e(A.A,{attrs:{label:"Company"},model:{value:t.editedItem.company,callback:function(e){t.$set(t.editedItem,"company",e)},expression:"editedItem.company"}})],1)],1),e(p.A,[e(o.A,{attrs:{cols:"12"}},[e(A.A,{attrs:{label:"Email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1)],1),e(p.A,[e(o.A,{attrs:{cols:"12"}},[e(A.A,{attrs:{label:"Contact No"},model:{value:t.editedItem.contactNo,callback:function(e){t.$set(t.editedItem,"contactNo",e)},expression:"editedItem.contactNo"}})],1)],1),e(p.A,[e(o.A,{attrs:{cols:"12"}},[e(A.A,{attrs:{label:"Address"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}})],1)],1)],1)],1),e(n.SL,[e(f.A),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),e(d.A,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(a.A,[e(n.ri,{staticClass:"text-h5"},[t._v("Are you sure you want to delete this item?")]),e(n.SL,[e(f.A),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(f.A)],1)],1)],1)],1)]},proxy:!0},{key:"item.image",fn:function({item:t}){return[e("div",{staticClass:"ma-1"},[e(h.A,{attrs:{"lazy-src":t.image,"max-height":"50","max-width":"50",src:t.image}})],1)]}},{key:"item.actions",fn:function({item:i}){return[e(g.A,{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function({attrs:i,on:a}){return[e(s.A,t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),a),[e(c.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e(m.A,t._l(t.actions,(function(s,a){return e(u.A,{key:a,on:{click:function(e){return t.handleAction(s.title,i)}}},[e(v.UZ,[t._v(t._s(s.title))])],1)})),1)],1)]}},{key:"no-data",fn:function(){return[e(s.A,{attrs:{color:"#000033"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)},k=[],y=(i(4114),i(5353)),b=i(3180),w=i(9483),C=function(){var t=this,e=t._self._c;return e(p.A,{attrs:{justify:"center"}},[e(d.A,{attrs:{persistent:"","max-width":"800px",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.hasItems?e(a.A,[e(n.ri,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.items.name))]),e(f.A),e("div",[e(b.A,{staticClass:"ma-1",attrs:{small:"",color:"success","text-color":"white"}},[t._v(" "+t._s(t.items.brand.name)+" ")]),e(b.A,{staticClass:"ma-1",attrs:{small:"",color:"orange","text-color":"white"}},[t._v(" "+t._s(t.items.category.name)+" ")])],1)],1),e(n.OQ,{staticStyle:{height:"600px"}},[e("div",{staticClass:"my-4 text-subtitle-1"},[t._v(" Product Code â€¢ "+t._s(t.items.productCode)+" ")]),e("div",[t._v(" "+t._s(t.items.description)+" ")]),e(w.A,{staticClass:"mt-3"}),e(n.ri,[t._v("Prices")]),e("div",[e(r.A,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.prices,"items-per-page":-1,"hide-default-footer":!0,loading:t.isLoading}})],1),e(n.ri,[t._v("Stocks")]),e("div",[e(r.A,{staticClass:"elevation-1",attrs:{headers:t.stocksHeader,items:t.stocks,"items-per-page":-1,"hide-default-footer":!0,loading:t.isLoading}})],1)],1),e(n.SL,[e(f.A),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Close ")]),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Save ")])],1)],1):t._e()],1)],1)},_=[],S={data:()=>({headers:[{text:"Unit",sortable:!1,value:"unit.name"},{text:"Variant",sortable:!1,value:"variant.name"},{text:"Colors",sortable:!1,value:"color"},{text:"Item Price",value:"itemPrice",sortable:!1},{text:"Sale Price",value:"salePrice",sortable:!1}],stocksHeader:[{text:"Supplier",align:"start",sortable:!1,value:"supplier.name"},{text:"Variant",value:"variant.name",sortable:!1},{text:"Quantity",value:"quantity",sortable:!1}],dialog:!1,prices:[],isLoading:!1,items:[],stocks:[]}),computed:{hasItems(){return Object.keys(this.items).length>0}},methods:{...(0,y.i0)({getItemById:"product/getItemById",getStockItems:"stock/getStockItems"}),async initialize(){this.isLoading=!0;let t=await this.items._id;const e=await this.getItemById(t),i=await this.getStockItems(t);this.prices=e.result.prices.map((t=>({...t,color:t.color.map((t=>t.name)).join(", ")}))),this.stocks=i.result,this.isLoading=!1},showDialog(t,e){this.dialog=t,this.items=e,this.initialize()}}},$=S,O=i(1656),D=(0,O.A)($,C,_,!1,null,null,null),E=D.exports,T={components:{ViewProductDialogVue:E},data:()=>({dialog:!1,dialogDelete:!1,headers:[{text:"Image",align:"start",sortable:!1,value:"image"},{text:"Name",align:"start",value:"name"},{text:"Brand",align:"start",value:"brand.name"},{text:"Category",align:"start",value:"category.name"},{text:"In Stock",align:"start",value:"availableStocks"},{text:"Type",align:"start",value:"type"},{text:"Options",value:"actions",sortable:!1}],items:[],editedIndex:-1,editedItem:{name:"",company:"",email:"",contactNo:"",address:""},defaultItem:{name:"",company:"",email:"",contactNo:"",address:""},itemId:null,isLoading:!1,showFuck:!1,selectedItems:{},actions:[{title:"Edit"},{title:"Delete"}],search:""}),computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},created(){this.initialize()},methods:{...(0,y.i0)({getItems:"product/getItem",addItem:"product/addItem",removeItem:"product/deleteItem",updateItem:"product/updateItem"}),async initialize(){this.isLoading=!0;const t=await this.getItems();console.log(t),this.items=t.result,this.isLoading=!1},onViewDialog(t){this.$refs.product.showDialog(!0,t),this.selectedItems=t},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.items.indexOf(t),this.itemId=t._id,this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){await this.removeItem(this.itemId),this.items.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.editedIndex>-1?(Object.assign(this.items[this.editedIndex],this.editedItem),await this.updateItem(this.editedItem)):(this.items.push(this.editedItem),await this.addItem(this.editedItem)),this.close()},handleAction(t,e){switch(t){case"View":this.onViewDialog(e);break;case"Edit":this.$router.push({name:"EditProduct",params:{id:e._id}});break;case"Delete":this.deleteItem(e);break;default:break}},testToggle(){console.log("testing toggle")}},watch:{items(t){return t}}},P=T,B=(0,O.A)(P,I,k,!1,null,null,null),L=B.exports},9991:function(t,e,i){i.d(e,{A:function(){return g}});var s=i(4596),a=i(5030),n=i(2031),o=i(7631),l=i(8171),r=i(7198),d=i(5648),c=i(4598),h=i(5803),m=i(1920),u=i(4152);const v=(0,h.A)(n.A,o.A,l.A,r.A,d.A,a.A);var g=v.extend({name:"v-dialog",directives:{ClickOutside:c.A},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(e=this.previousActiveElement)||void 0===e||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,m.rq)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):l.A.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{var t,e;(null===(t=this.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(this.previousActiveElement=document.activeElement,null===(e=this.$refs.dialog)||void 0===e||e.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===u.uP.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")&&!t.matches('[tabindex="-1"]')));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(s.A,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,u.Dg)(this.maxWidth),width:(0,u.Dg)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},3449:function(t,e,i){i.d(e,{A:function(){return o}});i(158),i(125);var s=i(5471);function a(t){return s["default"].extend({name:`v-${t}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:i,data:s,children:a}){s.staticClass=`${t} ${s.staticClass||""}`.trim();const{attrs:n}=s;if(n){s.attrs={};const t=Object.keys(n).filter((t=>{if("slot"===t)return!1;const e=n[t];return t.startsWith("data-")?(s.attrs[t]=e,!1):e||"string"===typeof e}));t.length&&(s.staticClass+=` ${t.join(" ")}`)}return i.id&&(s.domProps=s.domProps||{},s.domProps.id=i.id),e(i.tag,s,a)}})}var n=i(8041),o=a("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:i,children:s}){let a;const{attrs:o}=i;return o&&(i.attrs={},a=Object.keys(o).filter((t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}))),e.id&&(i.domProps=i.domProps||{},i.domProps.id=e.id),t(e.tag,(0,n.Ay)(i,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(a||[])}),s)}})}}]);
//# sourceMappingURL=723.85d7ec59.js.map